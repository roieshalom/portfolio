<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Project | Roie Shalom</title>
  <link rel="icon" type="image/x-icon" href="../content/images/favicon.ico">
  <link href="https://fonts.googleapis.com/css2?family=Momo+Trust+Sans:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../styles.css">
  <script src="https://kit.fontawesome.com/3ff078e01b.js" crossorigin="anonymous"></script>
  <style>
    /* Minimal project-specific styles that extend your existing CSS */
    body {
      background: var(--color-bg);
      color: var(--color-text);
      padding: 20px;
    }
    
    .project-container {
      max-width: 900px;
      margin: 0 auto;
    }
    
    .back-link {
      display: inline-block;
      margin-bottom: 32px;
      color: var(--color-link);
      text-decoration: none;
      font-weight: 500;
      font-size: 0.95em;
    }
    
    .back-link:hover {
      text-decoration: underline;
    }
    
    .project-gallery {
      display: grid;
      gap: 24px;
      margin-top: 48px;
    }
    
    .project-gallery img {
      width: 100%;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
  </style>
</head>
<body>
  <div class="project-container">
    <a href="/index.html" class="back-link">
      <i class="fa-solid fa-arrow-left" style="margin-right: 8px;"></i> Back to Portfolio
    </a>
    <div id="project-content">
      <!-- Content will be loaded dynamically -->
      <div style="text-align: center; padding: 60px 20px;">
        <p>Loading project...</p>
      </div>
    </div>
  </div>

  <script>
    // Get project ID from URL parameter
    const urlParams = new URLSearchParams(window.location.search);
    const projectId = urlParams.get('id');
    
    if (!projectId) {
      document.getElementById('project-content').innerHTML = `
        <div style="text-align: center; padding: 60px 20px;">
          <h1>No project specified</h1>
          <p>Please select a project from the <a href="../index.html">homepage</a>.</p>
        </div>
      `;
    } else {
      // Load project data
      fetch('../data/projects.json')
        .then(res => res.json())
        .then(projects => {
          const project = projects.find(p => p.id === projectId);
          
          if (!project) {
            document.getElementById('project-content').innerHTML = `
              <div style="text-align: center; padding: 60px 20px;">
                <h1>Project not found</h1>
                <p>The project "${projectId}" doesn't exist. <a href="../index.html">Go back to homepage</a>.</p>
              </div>
            `;
            return;
          }
          
          // Update page title
          document.title = project.title + ' | Roie Shalom';
          
          // Generate image paths automatically
          const images = [];
          for (let i = 1; i <= project.imageCount; i++) {
            images.push(`../${project.imageFolder}/f${i}.png`);
          }
          
          // Render project page using your existing CSS classes
          document.getElementById('project-content').innerHTML = `
            <div class="section">
              <div class="section-title">${project.title}</div>
              <p style="margin-bottom: 12px; color: var(--color-text-secondary);">${project.category}</p>
              <p style="font-size: 1.05em; line-height: 1.6;">${project.desc}</p>
            </div>
            
            <div class="project-gallery">
              ${images.map((imgPath, index) => `
                <img src="${imgPath}" alt="${project.title} screenshot ${index + 1}" loading="lazy">
              `).join('')}
            </div>
          `;
        })
        .catch(error => {
          document.getElementById('project-content').innerHTML = `
            <div style="text-align: center; padding: 60px 20px;">
              <h1>Error loading project</h1>
              <p>There was an error loading the project data. Please try again later.</p>
            </div>
          `;
          console.error('Error loading project:', error);
        });
    }
  </script>
  
  <script src="../theme.js"></script>
</body>
</html>
